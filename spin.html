<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Lucky Slot Machine</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./src/style.css" />
    <link rel="stylesheet" href="./src/crt.css" />
    <link rel="stylesheet" href="./src/safe-area.css" />
  </head>
  <body class="crt">
    <canvas id="matrix-rain"></canvas>
    <main class="app">
      <!-- <h2>Jackpot of Dreams</h2> -->
      <!-- <p id="coin-hint" class="hint">Insert a coin to start spinning.</p> -->
      
      <h2 id="nickname-banner" class="hint" aria-live="polite" style="display:none;"></h2>
      <section class="slot-machine" role="group" aria-label="Slot machine">
        <div class="reel" data-reel="0">
          <span class="glyph" aria-hidden="true"></span>
        </div>
        <div class="reel" data-reel="1">
          <span class="glyph" aria-hidden="true"></span>
        </div>
        <div class="reel" data-reel="2">
          <span class="glyph" aria-hidden="true"></span>
        </div>
        <div class="lever-column" aria-hidden="true">
          <div id="lever-root" class="lever-root"></div>
        </div>
      </section>
      <p id="spin-hint" class="hintS">Press SPACE to participate in the lottery</p>
      <output id="status" role="status" aria-live="polite"></output>
    </main>

    <script type="module" src="./src/main.js"></script>
    <script type="module" src="/src/slotLever.tsx"></script>
    <script>
      (function() {
        const banner = document.getElementById('nickname-banner');
        if (!banner) return;
        try {
          const info = JSON.parse(localStorage.getItem('playerInfo') || '{}') || {};
          const nickname = (info.nickname || '').trim();
          if (nickname) {
            banner.textContent = `${nickname}'s H-1B Application`;
            banner.style.display = 'block';
          }
        } catch (_) {
          /* no-op */
        }
      })();
    </script>
  </body>
</html>
